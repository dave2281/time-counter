{
  "version": 3,
  "sources": ["../../javascript/deed_show.js"],
  "sourcesContent": ["// Deed show page functionality\nlet isDescriptionOpen = false;\nlet timerUpdateInterval = null;\nlet startTime = null;\n\nfunction initDeedShowPage() {\n  // Initialize description toggle buttons\n  const toggleBtns = document.querySelectorAll('.toggle-description-btn');\n  toggleBtns.forEach(btn => {\n    btn.addEventListener('click', function(e) {\n      e.preventDefault();\n      toggleDescription();\n    });\n  });\n\n  // Initialize toggle status indicator\n  const checkbox = document.querySelector('input[type=\"checkbox\"][id*=\"finished\"]');\n  if (checkbox) {\n    checkbox.addEventListener('change', function() {\n      toggleStatusIndicator(this);\n    });\n  }\n\n  // Auto-show description on page load\n  setTimeout(() => {\n    if (document.getElementById('description-content')) {\n      toggleDescription(); // Open by default\n    }\n  }, 100);\n\n  // Initialize timer functionality\n  initTimer();\n}\n\nfunction toggleStatusIndicator(checkbox) {\n  const text = document.getElementById('status-text');\n  const submitBtn = checkbox.form.querySelector('input[type=\"submit\"]');\n  \n  if (checkbox.checked) {\n    text.textContent = 'Done';\n    submitBtn.textContent = 'Complete';\n    submitBtn.className = 'px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white font-medium rounded-md transition-colors text-xs hover-lift';\n  } else {\n    text.textContent = 'Mark Done';\n    submitBtn.textContent = 'Update';\n    submitBtn.className = 'px-4 py-1.5 bg-green-600 hover:bg-green-700 text-white font-medium rounded-md transition-colors text-xs hover-lift';\n  }\n}\n\nfunction toggleDescription() {\n  const content = document.getElementById('description-content');\n  const arrow = document.getElementById('description-arrow');\n  \n  if (!isDescriptionOpen) {\n    // Open - use auto for full height\n    content.classList.remove('description-hidden');\n    content.style.height = 'auto';\n    arrow.style.transform = 'rotate(180deg)';\n    isDescriptionOpen = true;\n  } else {\n    // Close\n    content.classList.add('description-hidden');\n    content.style.height = '0';\n    arrow.style.transform = 'rotate(0deg)';\n    isDescriptionOpen = false;\n  }\n}\n\nfunction initTimer() {\n  const startBtn = document.getElementById('start-timer');\n  const stopBtn = document.getElementById('stop-timer');\n  const display = document.getElementById('timer-display');\n  const indicator = document.getElementById('timer-indicator');\n\n  if (startBtn) {\n    startBtn.addEventListener('click', function() {\n      const deedId = this.dataset.deedId;\n      startTimer(deedId);\n    });\n  }\n\n  if (stopBtn) {\n    stopBtn.addEventListener('click', function() {\n      const deedId = this.dataset.deedId;\n      stopTimer(deedId);\n    });\n  }\n\n  // Check initial timer status\n  checkTimerStatus();\n}\n\nfunction startTimer(deedId) {\n  fetch(`/daily_logs/start_timer`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-CSRF-Token': document.querySelector('[name=\"csrf-token\"]').content\n    },\n    body: JSON.stringify({ deed_id: deedId })\n  })\n  .then(response => response.json())\n  .then(data => {\n    if (data.success) {\n      startTime = new Date(data.start_time);\n      updateTimerDisplay();\n      startTimerUpdates();\n      updateTimerUI(true);\n    }\n  });\n}\n\nfunction stopTimer(deedId) {\n  fetch(`/daily_logs/stop_timer`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n      'X-CSRF-Token': document.querySelector('[name=\"csrf-token\"]').content\n    },\n    body: JSON.stringify({ deed_id: deedId })\n  })\n  .then(response => response.json())\n  .then(data => {\n    if (data.success) {\n      clearInterval(timerUpdateInterval);\n      updateTimerUI(false);\n      // Reload page to show updated times\n      window.location.reload();\n    }\n  });\n}\n\nfunction checkTimerStatus() {\n  const deedId = document.getElementById('start-timer')?.dataset.deedId;\n  if (!deedId) return;\n\n  fetch(`/daily_logs/timer_status?deed_id=${deedId}`)\n  .then(response => response.json())\n  .then(data => {\n    if (data.running) {\n      startTime = new Date(data.start_time);\n      updateTimerDisplay();\n      startTimerUpdates();\n      updateTimerUI(true);\n    }\n  });\n}\n\nfunction startTimerUpdates() {\n  timerUpdateInterval = setInterval(updateTimerDisplay, 1000);\n}\n\nfunction updateTimerDisplay() {\n  if (!startTime) return;\n  \n  const now = new Date();\n  const elapsed = Math.floor((now - startTime) / 1000);\n  \n  const hours = Math.floor(elapsed / 3600);\n  const minutes = Math.floor((elapsed % 3600) / 60);\n  const seconds = elapsed % 60;\n  \n  const display = document.getElementById('timer-display');\n  if (display) {\n    display.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n  }\n}\n\nfunction updateTimerUI(isRunning) {\n  const startBtn = document.getElementById('start-timer');\n  const stopBtn = document.getElementById('stop-timer');\n  const indicator = document.getElementById('timer-indicator');\n  \n  if (isRunning) {\n    if (startBtn) startBtn.style.display = 'none';\n    if (stopBtn) stopBtn.style.display = 'inline-block';\n    if (indicator) {\n      indicator.className = 'w-2 h-2 rounded-full bg-green-500';\n    }\n  } else {\n    if (startBtn) startBtn.style.display = 'inline-block';\n    if (stopBtn) stopBtn.style.display = 'none';\n    if (indicator) {\n      indicator.className = 'w-2 h-2 rounded-full bg-red-500';\n    }\n  }\n}\n\n// Initialize on page load\ndocument.addEventListener('DOMContentLoaded', initDeedShowPage);\ndocument.addEventListener('turbo:load', initDeedShowPage);\n\n// Cleanup on page leave\ndocument.addEventListener('turbo:before-visit', function() {\n  if (timerUpdateInterval) {\n    clearInterval(timerUpdateInterval);\n    timerUpdateInterval = null;\n  }\n});\n\n// Make functions globally available if needed\nwindow.toggleDescription = toggleDescription;\nwindow.toggleStatusIndicator = toggleStatusIndicator;"],
  "mappings": "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",
  "names": []
}
